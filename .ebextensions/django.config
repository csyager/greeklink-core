option_settings:
  aws:elasticbeanstalk:container:python:
    WSGIPath: greeklink_core.wsgi:application

packages:
    yum:
        git: []

commands:
    01_postgres_activate:
        command: sudo dnf install -y postgresql15.x86_64
    02_postgres_install:
        command: sudo yum install -y postgresql-devel
    03_makeMigrationsCore:
        command: "source /var/app/venv/*/bin/activate && python /var/app/current/manage.py makemigrations core"
        leader_only: true
    04_makeMigrationsRush:
        command: "source /var/app/venv/*/bin/activate && python /var/app/current/manage.py makemigrations rush"
        leader_only: true
    05_makeMigrationsCal:
        command: "source /var/app/venv/*/bin/activate && python /var/app/current/manage.py makemigrations cal"
        leader_only: true
    06_makeMigrationsOrganizations:
        command: "source /var/app/venv/*/bin/activate && python /var/app/current/manage.py makemigrations organizations"
        leader_only: true
    07_migrate:
        command: "source /var/app/venv/*/bin/activate && python /var/app/current/manage.py migrate_schemas --noinput"
        leader_only: true
    08_collectstatic:
        command: "source /var/app/venv/*/bin/activate && python /var/app/current/manage.py collectstatic --noinput"
        